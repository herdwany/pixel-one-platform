<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog ‚Äî Pixel One</title>
  <link rel="icon" type="image/png" sizes="96x96" href="/icon/black/favicon-96x96.png" />
  <link rel="icon" type="image/svg+xml" href="/icon/black/favicon.svg" />
  <link rel="shortcut icon" href="/icon/black/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/icon/black/apple-touch-icon.png" />
  <link rel="manifest" href="/icon/black/site.webmanifest" />

  <!-- Theme Manager -->
  <script src="assets/js/theme-manager.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=IBM+Plex+Sans+Arabic:wght@300;400;500;700&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: { DEFAULT: '#ff0000', dark: '#cc0000', light: '#ff3333' },
            surface: { DEFAULT: '#0d0d0d', card: '#141414', border: '#1f1f1f' },
          },
          fontFamily: {
            sans:   ['Inter', 'sans-serif'],
            arabic: ['"IBM Plex Sans Arabic"', 'sans-serif'],
          },
        }
      }
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    body {
      background-color: #050505;
      font-family: 'Inter', sans-serif;
      font-weight: 300;
      line-height: 1.6;
    }
    body::before {
      content: '';
      position: fixed; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none; z-index: 0;
    }
    .content { position: relative; z-index: 1; }
    .site-logo { direction: ltr; unicode-bidi: isolate; }
  </style>
</head>

<body class="text-white lang-fr">
<div class="content">

  <!-- ‚îÄ‚îÄ NAVBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <nav id="main-nav" class="fixed top-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-xl border-b border-white/[0.06] transition-shadow duration-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <div class="flex items-center justify-between h-16">
        <a href="index.html" dir="ltr" class="site-logo flex items-center gap-1.5 font-bold text-xl tracking-tight shrink-0">
          <span class="text-brand">Pixel</span><span>One</span>
        </a>
        <div class="hidden lg:flex items-center gap-7 text-sm text-gray-400">
          <a href="index.html#services" class="hover:text-white transition-colors duration-200" data-i18n="nav.services">Services</a>
          <a href="index.html#why" class="hover:text-white transition-colors duration-200" data-i18n="nav.why">Why Us</a>
          <a href="index.html#contact" class="hover:text-white transition-colors duration-200" data-i18n="nav.contact">Contact</a>
          <a href="blog.html" class="text-white transition-colors duration-200" data-i18n="footer.blog">Blog</a>
        </div>
        <div class="flex items-center gap-1.5 sm:gap-2">
          <button id="theme-toggle" onclick="toggleTheme()" class="w-9 h-9 rounded-lg flex items-center justify-center text-gray-400 hover:text-white hover:bg-white/[0.08] transition-all duration-200" aria-label="Toggle theme">
            <i id="theme-toggle-icon" class="theme-toggle-icon fa-solid fa-sun text-sm"></i>
          </button>
          <div class="relative" id="lang-dropdown-wrapper">
            <button id="lang-btn" class="flex items-center gap-1.5 h-9 px-2.5 rounded-lg border border-white/[0.08] hover:border-brand/30 text-gray-400 hover:text-white text-sm transition-all duration-200 cursor-pointer" aria-haspopup="listbox">
              <span id="lang-flag" class="text-base leading-none">üá´üá∑</span>
              <span id="lang-code" class="font-medium text-xs tracking-wide hidden sm:inline">FR</span>
              <i class="fa-solid fa-chevron-down text-[8px] opacity-40"></i>
            </button>
            <div id="lang-dropdown" class="hidden absolute end-0 top-full mt-2 w-44 bg-[#161616] border border-[#282828] rounded-xl shadow-2xl overflow-hidden z-50" role="listbox">
              <button onclick="setLanguage('fr')" data-lang="fr" role="option" class="lang-opt w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-300 hover:bg-brand/10 hover:text-white transition text-start">
                <span class="text-base leading-none">üá´üá∑</span>
                <div class="text-start flex-1"><p class="font-semibold text-xs">Fran√ßais</p><p class="text-[10px] text-gray-500" data-i18n="lang.fr.desc">Fran√ßais</p></div>
              </button>
              <div class="h-px bg-[#282828]"></div>
              <button onclick="setLanguage('en')" data-lang="en" role="option" class="lang-opt w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-300 hover:bg-brand/10 hover:text-white transition text-start">
                <span class="text-base leading-none">üá∫üá∏</span>
                <div class="text-start flex-1"><p class="font-semibold text-xs">English</p><p class="text-[10px] text-gray-500" data-i18n="lang.en.desc">Anglais</p></div>
              </button>
              <div class="h-px bg-[#282828]"></div>
              <button onclick="setLanguage('ar')" data-lang="ar" role="option" class="lang-opt w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-300 hover:bg-brand/10 hover:text-white transition text-start">
                <span class="text-base leading-none">üá≤üá¶</span>
                <div class="text-start flex-1" style="font-family:'IBM Plex Sans Arabic',sans-serif"><p class="font-semibold text-xs">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</p><p class="text-[10px] text-gray-500" data-i18n="lang.ar.desc">Arabe</p></div>
              </button>
            </div>
          </div>
          <a href="auth.html" class="hidden sm:flex items-center text-sm text-gray-400 hover:text-white transition-colors duration-200 px-2 py-1.5" data-i18n="nav.login">Connexion</a>
          <a href="services.html" class="hidden sm:flex items-center bg-brand hover:bg-brand-dark text-white text-xs font-semibold uppercase tracking-widest px-4 py-2 rounded-lg transition-colors duration-200" data-i18n="nav.cta">Nos services</a>
          <button id="mobile-menu-btn" onclick="toggleMobileMenu()" class="lg:hidden w-9 h-9 rounded-lg flex items-center justify-center text-gray-400 hover:text-white hover:bg-white/[0.08] transition-all duration-200" aria-label="Menu">
            <i class="fa-solid fa-bars text-sm"></i>
          </button>
        </div>
      </div>
    </div>
    <div id="mobile-menu" class="hidden lg:hidden border-t border-white/[0.06] bg-black/95 backdrop-blur-xl">
      <div class="max-w-7xl mx-auto px-4 py-3 space-y-1">
        <a href="index.html#services" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="nav.services">Services</a>
        <a href="index.html#why" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="nav.why">Pourquoi nous</a>
        <a href="index.html#contact" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="nav.contact">Contact</a>
        <a href="blog.html" class="block px-4 py-3 rounded-lg text-white bg-white/[0.05] text-sm font-medium" data-i18n="footer.blog">Blog</a>
        <div class="h-px bg-white/[0.06] my-2"></div>
        <a href="auth.html" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="nav.login">Connexion</a>
        <a href="services.html" class="block px-4 py-3 rounded-lg bg-brand/10 text-brand hover:bg-brand hover:text-white transition text-sm font-semibold text-center" data-i18n="nav.cta">Nos services</a>
      </div>
    </div>
  </nav>

  <!-- ‚îÄ‚îÄ BLOG CONTENT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <main class="pt-28 pb-20 px-6">
    <div class="max-w-6xl mx-auto">

      <!-- Back to Home -->
      <a href="index.html" class="inline-flex items-center gap-2 text-sm text-gray-400 hover:text-white transition mb-8 group">
        <i class="fa-solid fa-arrow-left group-hover:-translate-x-1 transition-transform"></i>
        <span data-i18n="blog.back">‚Üê Back to Home</span>
      </a>

      <!-- Page Header -->
      <div class="mb-12">
        <div class="inline-block bg-brand/10 border border-brand/30 text-brand text-xs font-semibold px-4 py-1.5 rounded-full mb-4 tracking-widest uppercase">
          <i class="fa-solid fa-pen-to-square mr-1"></i> <span data-i18n="footer.blog">Blog</span>
        </div>
        <h1 class="text-4xl md:text-5xl font-extrabold tracking-tighter mb-4">
          <span data-i18n="blog.header.title">Our</span> <span class="text-brand" data-i18n="blog.header.accent">Blog</span>
        </h1>
        <p class="text-gray-500 text-sm" data-i18n="blog.header.desc">Latest news and design tips.</p>
      </div>

      <!-- Blog Grid -->
      <div id="blog-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div class="col-span-full text-center py-20 text-gray-500">
          <i class="fa-solid fa-spinner fa-spin text-2xl mb-3"></i>
          <p data-i18n="blog.loading">Loading articles‚Ä¶</p>
        </div>
      </div>
    </div>
  </main>

  <!-- ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <footer class="border-t border-white/[0.06] py-10 px-6">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4 text-gray-500 text-sm">
      <p class="font-bold text-white site-logo" dir="ltr"><span class="text-brand">Pixel</span>One ¬© 2026</p>
      <div class="flex flex-wrap justify-center gap-4 sm:gap-6">
        <a href="services.html"  class="hover:text-white transition" data-i18n="footer.services">Services</a>
        <a href="privacy.html"   class="hover:text-white transition" data-i18n="footer.privacy">Confidentialit√©</a>
        <a href="terms.html"     class="hover:text-white transition" data-i18n="footer.terms">Conditions</a>
      </div>
      <p><i class="fa-solid fa-heart text-brand"></i> <span data-i18n="footer.made">Made in Morocco</span></p>
    </div>
  </footer>

</div><!-- /content -->

<script src="assets/js/config.js"></script>
<script src="assets/js/i18n.js"></script>
<script src="assets/js/supabase-client.js"></script>
<script>
  let _blogPosts = [];

  function renderBlog() {
    const container = document.getElementById('blog-grid');
    if (!_blogPosts.length) {
      container.innerHTML = `<div class="col-span-full text-center py-20 text-gray-500">${t('blog.empty')}</div>`;
      return;
    }
    container.innerHTML = _blogPosts.map(post => `
      <article class="bg-surface-card border border-surface-border rounded-2xl overflow-hidden hover:border-brand/50 transition group">
        <div class="h-48 overflow-hidden relative">
          <img src="${post.image_url || 'https://via.placeholder.com/400x200?text=Pixel+One'}"
               class="w-full h-full object-cover group-hover:scale-105 transition duration-500"
               alt="${post.title}" loading="lazy">
        </div>
        <div class="p-6">
          <p class="text-xs text-gray-500 mb-2">
            <i class="fa-regular fa-calendar mr-1"></i>
            ${new Date(post.created_at).toLocaleDateString(getLang() === 'ar' ? 'ar-MA' : (getLang() === 'en' ? 'en-GB' : 'fr-FR'), { day:'2-digit', month:'short', year:'numeric' })}
          </p>
          <h2 class="text-xl font-bold mb-2 leading-tight">${post.title}</h2>
          <p class="text-gray-400 text-sm line-clamp-3 mb-4">${(post.content || '').substring(0, 120)}‚Ä¶</p>
          <button onclick='openArticle("${post.title.replace(/'/g, "&#39;")}", ${JSON.stringify(post.content)}, "${post.image_url || ''}")'
                  class="text-xs text-brand font-bold uppercase tracking-widest hover:underline cursor-pointer">
            ${t('blog.readmore')}
          </button>
        </div>
      </article>
    `).join('');
  }

  (async () => {
    try {
      const sb = getSupabaseClient();
      const { data: posts, error } = await sb
        .from('blog_posts')
        .select('*')
        .eq('is_published', true)
        .order('created_at', { ascending: false });

      _blogPosts = posts || [];
    } catch (err) {
      console.warn('[PixelOne] Blog load:', err.message);
      _blogPosts = [];
    }
    renderBlog();
  })();

  document.addEventListener('langchange', renderBlog);
</script>

<!-- ‚îÄ‚îÄ BLOG ARTICLE MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="blog-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4">
  <div class="bg-surface-card border border-surface-border rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative">
    <button onclick="document.getElementById('blog-modal').classList.add('hidden')" class="absolute top-4 right-4 bg-black/50 text-white p-2 rounded-full hover:bg-brand transition">
      <i class="fa-solid fa-xmark"></i>
    </button>
    <img id="modal-img" src="" class="w-full h-64 object-cover">
    <div class="p-8">
      <h2 id="modal-title" class="text-3xl font-bold mb-4"></h2>
      <div id="modal-content" class="text-gray-300 leading-relaxed whitespace-pre-wrap"></div>
    </div>
  </div>
</div>

<script>
  function openArticle(title, content, img) {
    document.getElementById('modal-title').innerText = title;
    document.getElementById('modal-content').innerText = content;
    document.getElementById('modal-img').src = img;
    document.getElementById('blog-modal').classList.remove('hidden');
  }
</script>
</body>
</html>
