<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Services — Pixel One</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { DEFAULT: '#ff0000', dark: '#cc0000' },
            surface: { DEFAULT: '#0d0d0d', card: '#141414', border: '#1f1f1f' },
          },
          fontFamily: { sans: ['Inter', 'sans-serif'] },
        }
      }
    }
  </script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    body { background-color: #050505; font-family: 'Inter', sans-serif; }
    body::before {
      content: '';
      position: fixed; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none; z-index: 0;
    }
    .content { position: relative; z-index: 1; }
    .filter-chip { cursor: pointer; transition: all .2s; }
    .filter-chip.active { background-color: #ff0000; border-color: #ff0000; color: #fff; }
    .price-track { appearance: none; height: 4px; background: #1f1f1f; outline: none; border-radius: 9999px; }
    .price-track::-webkit-slider-thumb { appearance: none; width: 18px; height: 18px; border-radius: 50%; background: #ff0000; cursor: pointer; }
  </style>
</head>

<body class="text-white">
<div class="content">

  <!-- ── NAVBAR ───────────────────────────────────────────── -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-black/70 backdrop-blur-md border-b border-surface-border">
    <div class="max-w-7xl mx-auto px-6 flex items-center justify-between h-16">
      <a href="index.html" class="flex items-center gap-2 font-bold text-xl tracking-tight">
        <span class="text-brand">Pixel</span><span>One</span>
      </a>
      <div class="flex items-center gap-3">
        <a href="auth.html" class="text-sm text-gray-400 hover:text-white transition">Connexion</a>
        <a href="dashboard.html" class="bg-surface-card border border-surface-border hover:border-brand/40 text-sm px-4 py-2 rounded-lg transition">
          Mon espace <i class="fa-solid fa-user ml-1 text-xs"></i>
        </a>
      </div>
    </div>
  </nav>

  <div class="pt-24 pb-16 px-6">
    <div class="max-w-7xl mx-auto">

      <!-- Page header -->
      <div class="mb-10">
        <h1 class="text-3xl font-extrabold mb-1">Catalogue des <span class="text-brand">Services</span></h1>
        <p class="text-gray-400 text-sm">Choisissez votre service et commandez en quelques clics.</p>
      </div>

      <div class="flex flex-col lg:flex-row gap-8">

        <!-- ── SIDEBAR FILTERS ──────────────────────────── -->
        <aside class="w-full lg:w-64 shrink-0">
          <div class="bg-surface-card border border-surface-border rounded-2xl p-6 sticky top-24 space-y-8">

            <!-- Search -->
            <div>
              <label class="text-xs text-gray-400 uppercase tracking-widest font-semibold mb-2 block">Recherche</label>
              <div class="relative">
                <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm"></i>
                <input id="search-input" type="text" placeholder="Montage vidéo…"
                       class="w-full bg-surface border border-surface-border rounded-lg pl-9 pr-3 py-2.5 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-brand/50 transition" />
              </div>
            </div>

            <!-- Category -->
            <div>
              <label class="text-xs text-gray-400 uppercase tracking-widest font-semibold mb-3 block">Catégorie</label>
              <div class="flex flex-col gap-2" id="category-filters">
                <button data-cat="" class="filter-chip active text-left text-sm border border-surface-border rounded-lg px-3 py-2">
                  <i class="fa-solid fa-grip mr-2 text-xs"></i>Tout
                </button>
                <!-- Populated by JS -->
              </div>
            </div>

            <!-- Price Range -->
            <div>
              <label class="text-xs text-gray-400 uppercase tracking-widest font-semibold mb-3 block">Prix max</label>
              <input id="price-range" type="range" min="0" max="10000" step="100" value="10000"
                     class="price-track w-full" />
              <div class="flex justify-between text-xs text-gray-500 mt-1">
                <span>0 MAD</span>
                <span id="price-label" class="text-brand font-semibold">10 000 MAD</span>
              </div>
            </div>

            <!-- Reset -->
            <button id="reset-filters"
                    class="w-full text-sm text-gray-400 hover:text-white border border-surface-border hover:border-brand/40 rounded-lg py-2 transition">
              <i class="fa-solid fa-rotate-left mr-1"></i>Réinitialiser
            </button>
          </div>
        </aside>

        <!-- ── SERVICE GRID ──────────────────────────────── -->
        <div class="flex-1">
          <div class="flex items-center justify-between mb-5">
            <p id="result-count" class="text-sm text-gray-400"></p>
            <select id="sort-select"
                    class="bg-surface-card border border-surface-border text-sm text-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:border-brand/50">
              <option value="default">Trier par défaut</option>
              <option value="price-asc">Prix croissant</option>
              <option value="price-desc">Prix décroissant</option>
            </select>
          </div>

          <div id="services-grid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
            <div class="col-span-3 text-center py-16 text-gray-500">
              <i class="fa-solid fa-spinner fa-spin text-2xl mb-3"></i>
              <p>Chargement…</p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- ── FOOTER ─────────────────────────────────────────────── -->
  <footer class="border-t border-surface-border py-8 px-6 text-center text-gray-600 text-sm">
    <span class="text-white font-bold"><span class="text-brand">Pixel</span>One</span> © 2025 — Agence Créative Maroc
  </footer>

</div>

<!-- ── Scripts ────────────────────────────────────────────── -->
<script src="assets/js/config.js"></script>
<script>
  let activeCategory = '';
  let maxPrice = 10000;
  let searchQuery = '';
  let sortMode = 'default';

  // Build category chips
  const catContainer = document.getElementById('category-filters');
  CONFIG.CATEGORIES.forEach(cat => {
    const btn = document.createElement('button');
    btn.dataset.cat = cat.value;
    btn.className = 'filter-chip text-left text-sm border border-surface-border rounded-lg px-3 py-2';
    const icons = { video: 'fa-film', design: 'fa-pen-nib', web: 'fa-code' };
    btn.innerHTML = `<i class="fa-solid ${icons[cat.value] || 'fa-tag'} mr-2 text-xs"></i>${cat.label}`;
    catContainer.appendChild(btn);
  });

  // Filter state helpers
  function getFiltered() {
    let list = [...CONFIG.SERVICES];
    if (activeCategory) list = list.filter(s => s.category === activeCategory);
    if (searchQuery)    list = list.filter(s => s.title.toLowerCase().includes(searchQuery.toLowerCase()));
    list = list.filter(s => s.price <= maxPrice);
    if (sortMode === 'price-asc')  list.sort((a, b) => a.price - b.price);
    if (sortMode === 'price-desc') list.sort((a, b) => b.price - a.price);
    return list;
  }

  function renderGrid() {
    const grid = document.getElementById('services-grid');
    const filtered = getFiltered();
    document.getElementById('result-count').textContent = `${filtered.length} service(s) trouvé(s)`;

    if (!filtered.length) {
      grid.innerHTML = `
        <div class="col-span-3 text-center py-16 text-gray-500">
          <i class="fa-solid fa-face-meh text-3xl mb-3"></i>
          <p>Aucun service trouvé pour ces critères.</p>
        </div>`;
      return;
    }

    const catIcons = { video: 'fa-film', design: 'fa-pen-nib', web: 'fa-code' };

    grid.innerHTML = filtered.map(s => `
      <a href="service-details.html?id=${s.id}"
         class="group bg-surface-card border border-surface-border rounded-2xl overflow-hidden hover:border-brand/40 transition-all hover:-translate-y-1 duration-300">
        <div class="relative overflow-hidden h-44">
          <img src="${s.image_url}" alt="${s.title}"
               class="w-full h-full object-cover group-hover:scale-105 transition duration-500" />
          <span class="absolute top-3 left-3 bg-black/70 backdrop-blur-sm text-xs text-gray-300 px-3 py-1 rounded-full border border-surface-border">
            <i class="fa-solid ${catIcons[s.category] || 'fa-tag'} mr-1 text-brand text-[10px]"></i>
            ${CONFIG.CATEGORIES.find(c => c.value === s.category)?.label || s.category}
          </span>
        </div>
        <div class="p-5">
          <h3 class="font-bold text-base mb-2">${s.title}</h3>
          <ul class="text-gray-400 text-xs space-y-1 mb-4">
            ${s.features.map(f => `<li class="flex items-center gap-2"><i class="fa-solid fa-check text-brand text-[10px]"></i>${f}</li>`).join('')}
          </ul>
          <div class="flex items-center justify-between mt-4 pt-4 border-t border-surface-border">
            <p class="text-brand font-extrabold text-xl">${s.price.toLocaleString('fr-FR')} <span class="text-sm font-normal text-gray-500">MAD</span></p>
            <span class="bg-brand/10 hover:bg-brand text-brand hover:text-white text-xs font-semibold px-3 py-1.5 rounded-lg border border-brand/20 transition">
              Commander
            </span>
          </div>
        </div>
      </a>
    `).join('');
  }

  // Event listeners
  document.addEventListener('click', e => {
    const chip = e.target.closest('.filter-chip');
    if (!chip) return;
    document.querySelectorAll('.filter-chip').forEach(b => b.classList.remove('active'));
    chip.classList.add('active');
    activeCategory = chip.dataset.cat;
    renderGrid();
  });

  document.getElementById('search-input').addEventListener('input', e => {
    searchQuery = e.target.value.trim();
    renderGrid();
  });

  document.getElementById('price-range').addEventListener('input', e => {
    maxPrice = Number(e.target.value);
    document.getElementById('price-label').textContent = maxPrice.toLocaleString('fr-FR') + ' MAD';
    renderGrid();
  });

  document.getElementById('sort-select').addEventListener('change', e => {
    sortMode = e.target.value;
    renderGrid();
  });

  document.getElementById('reset-filters').addEventListener('click', () => {
    activeCategory = ''; maxPrice = 10000; searchQuery = ''; sortMode = 'default';
    document.getElementById('search-input').value = '';
    document.getElementById('price-range').value = 10000;
    document.getElementById('price-label').textContent = '10 000 MAD';
    document.getElementById('sort-select').value = 'default';
    document.querySelectorAll('.filter-chip').forEach(b => b.classList.remove('active'));
    document.querySelector('.filter-chip[data-cat=""]').classList.add('active');
    renderGrid();
  });

  // Init
  renderGrid();
</script>
</body>
</html>
