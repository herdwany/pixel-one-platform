<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Services â€” Pixel One</title>
  <link rel="icon" type="image/png" sizes="96x96" href="/icon/black/favicon-96x96.png" />
  <link rel="icon" type="image/svg+xml" href="/icon/black/favicon.svg" />
  <link rel="shortcut icon" href="/icon/black/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/icon/black/apple-touch-icon.png" />
  <link rel="manifest" href="/icon/black/site.webmanifest" />

  <!-- Theme Manager -->
  <script src="assets/js/theme-manager.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=IBM+Plex+Sans+Arabic:wght@300;400;500;700&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: { DEFAULT: '#ff0000', dark: '#cc0000', light: '#ff3333' },
            surface: { DEFAULT: '#0d0d0d', card: '#141414', border: '#1f1f1f' },
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            arabic: ['"IBM Plex Sans Arabic"', 'sans-serif'],
          },
        }
      }
    }
  </script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="assets/css/ui-polish.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

  <style>
    body { background-color: #050505; font-family: 'Inter', sans-serif; font-weight: 300; }
    body.lang-fr { font-family: 'Inter', sans-serif; }
    body.lang-en { font-family: 'Inter', sans-serif; }
    body.lang-ar { font-family: 'IBM Plex Sans Arabic', sans-serif; }
    .site-logo { direction: ltr; unicode-bidi: isolate; }
    body::before {
      content: '';
      position: fixed; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none; z-index: 0;
    }
    .content { position: relative; z-index: 1; }

    /* Filter chips */
    .filter-chip { cursor: pointer; transition: all .2s; }
    .filter-chip.active { background-color: #ff0000; border-color: #ff0000; color: #fff; }

    /* Price range slider */
    .price-track { appearance: none; height: 4px; background: #1f1f1f; outline: none; border-radius: 9999px; }
    .price-track::-webkit-slider-thumb { appearance: none; width: 18px; height: 18px; border-radius: 50%; background: #ff0000; cursor: pointer; border: 2px solid #fff; box-shadow: 0 0 8px rgba(255,0,0,0.4); }
    .price-track::-moz-range-thumb { width: 18px; height: 18px; border-radius: 50%; background: #ff0000; cursor: pointer; border: 2px solid #fff; box-shadow: 0 0 8px rgba(255,0,0,0.4); }

    /* Service card hover */
    .svc-card { transition: all .35s cubic-bezier(.4,0,.2,1); }
    .svc-card:hover { transform: translateY(-6px); box-shadow: 0 20px 50px -12px rgba(255,0,0,0.15); }
    .svc-card:hover .svc-img { transform: scale(1.08); }
    .svc-img { transition: transform .6s cubic-bezier(.4,0,.2,1); }

    /* Mobile filter overlay */
    .filter-overlay { transition: opacity .3s, visibility .3s; }
    .filter-overlay.active { opacity: 1; visibility: visible; }
    .filter-panel-mobile { transition: transform .35s cubic-bezier(.4,0,.2,1); }
    .filter-overlay.active .filter-panel-mobile { transform: translateY(0); }

    /* Animate in */
    .fade-up { opacity: 0; transform: translateY(24px); }
  </style>
</head>

<body class="text-white lang-fr">
<div class="content">

  <!-- â”€â”€ NAVBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <nav id="main-nav" class="fixed top-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-xl border-b border-white/[0.06] transition-shadow duration-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <div class="flex items-center justify-between h-16">
        <a href="index.html" dir="ltr" class="site-logo flex items-center gap-1.5 font-bold text-xl tracking-tight shrink-0">
          <span class="text-brand">Pixel</span><span>One</span>
        </a>
        <div class="hidden lg:flex items-center gap-7 text-sm text-gray-400">
          <a href="index.html#services" class="hover:text-white transition-colors duration-200" data-i18n="nav.services">Services</a>
          <a href="index.html#why" class="hover:text-white transition-colors duration-200" data-i18n="nav.why">Pourquoi nous</a>
          <a href="index.html#contact" class="hover:text-white transition-colors duration-200" data-i18n="nav.contact">Contact</a>
          <a href="blog.html" class="hover:text-white transition-colors duration-200" data-i18n="footer.blog">Blog</a>
        </div>
        <div class="flex items-center gap-1.5 sm:gap-2">
          <button type="button" id="theme-toggle" onclick="toggleTheme(event)" class="w-9 h-9 rounded-lg flex items-center justify-center text-gray-400 hover:text-white hover:bg-white/[0.08] transition-all duration-200" aria-label="Toggle theme">
            <i id="theme-toggle-icon" class="theme-toggle-icon fa-solid fa-sun text-sm"></i>
          </button>
          <div class="relative" id="lang-dropdown-wrapper">
            <button id="lang-btn" class="flex items-center gap-1.5 h-9 px-2.5 rounded-lg border border-white/[0.08] hover:border-brand/30 text-gray-400 hover:text-white text-sm transition-all duration-200 cursor-pointer" aria-haspopup="listbox">
              <span id="lang-flag" class="text-base leading-none">ðŸ‡«ðŸ‡·</span>
              <span id="lang-code" class="font-medium text-xs tracking-wide hidden sm:inline">FR</span>
              <i class="fa-solid fa-chevron-down text-[8px] opacity-40"></i>
            </button>
            <div id="lang-dropdown" class="hidden absolute end-0 top-full mt-2 w-44 bg-[#161616] border border-[#282828] rounded-xl shadow-2xl overflow-hidden z-50" role="listbox">
              <button onclick="setLanguage('fr')" data-lang="fr" role="option" class="lang-opt w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-300 hover:bg-brand/10 hover:text-white transition text-start">
                <span class="text-base leading-none">ðŸ‡«ðŸ‡·</span>
                <div class="text-start flex-1"><p class="font-semibold text-xs">FranÃ§ais</p><p class="text-[10px] text-gray-500" data-i18n="lang.fr.desc">FranÃ§ais</p></div>
              </button>
              <div class="h-px bg-[#282828]"></div>
              <button onclick="setLanguage('en')" data-lang="en" role="option" class="lang-opt w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-300 hover:bg-brand/10 hover:text-white transition text-start">
                <span class="text-base leading-none">ðŸ‡ºðŸ‡¸</span>
                <div class="text-start flex-1"><p class="font-semibold text-xs">English</p><p class="text-[10px] text-gray-500" data-i18n="lang.en.desc">Anglais</p></div>
              </button>
              <div class="h-px bg-[#282828]"></div>
              <button onclick="setLanguage('ar')" data-lang="ar" role="option" class="lang-opt w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-300 hover:bg-brand/10 hover:text-white transition text-start">
                <span class="text-base leading-none">ðŸ‡²ðŸ‡¦</span>
                <div class="text-start flex-1" style="font-family:'IBM Plex Sans Arabic',sans-serif"><p class="font-semibold text-xs">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</p><p class="text-[10px] text-gray-500" data-i18n="lang.ar.desc">Arabe</p></div>
              </button>
            </div>
          </div>
          <a href="auth.html" id="nav-login-link" class="hidden sm:flex items-center text-sm text-gray-400 hover:text-white transition-colors duration-200 px-2 py-1.5" data-i18n="nav.login">Connexion</a>
          <a href="dashboard.html" class="hidden sm:inline-flex items-center bg-surface-card border border-surface-border hover:border-brand/40 text-sm px-4 py-2 rounded-lg transition">
            <span data-i18n="nav.myspace">Mon espace</span> <i class="fa-solid fa-user ms-1 text-xs"></i>
          </a>
          <button id="mobile-menu-btn" onclick="toggleMobileMenu()" class="lg:hidden w-9 h-9 rounded-lg flex items-center justify-center text-gray-400 hover:text-white hover:bg-white/[0.08] transition-all duration-200" aria-label="Menu">
            <i class="fa-solid fa-bars text-sm"></i>
          </button>
        </div>
      </div>
    </div>
    <div id="mobile-menu" class="hidden lg:hidden border-t border-white/[0.06] bg-black/95 backdrop-blur-xl">
      <div class="max-w-7xl mx-auto px-4 py-3 space-y-1">
        <a href="index.html#services" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="nav.services">Services</a>
        <a href="index.html#why" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="nav.why">Pourquoi nous</a>
        <a href="index.html#contact" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="nav.contact">Contact</a>
        <a href="blog.html" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="footer.blog">Blog</a>
        <div class="h-px bg-white/[0.06] my-2"></div>
        <a href="auth.html" class="block px-4 py-3 rounded-lg text-gray-300 hover:text-white hover:bg-white/[0.05] transition text-sm font-medium" data-i18n="nav.login">Connexion</a>
        <a href="dashboard.html" class="block px-4 py-3 rounded-lg bg-brand/10 text-brand hover:bg-brand hover:text-white transition text-sm font-semibold text-center" data-i18n="nav.myspace">Mon espace</a>
      </div>
    </div>
  </nav>

  <!-- â”€â”€ HERO HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section class="pt-24 pb-6 px-6 relative overflow-hidden">
    <!-- Decorative background -->
    <div class="absolute inset-0 pointer-events-none">
      <div class="absolute top-20 left-1/4 w-72 h-72 bg-brand/5 rounded-full blur-[120px]"></div>
      <div class="absolute top-32 right-1/4 w-56 h-56 bg-brand/3 rounded-full blur-[100px]"></div>
    </div>
    <div class="max-w-7xl mx-auto relative">
      <!-- Breadcrumb -->
      <nav class="flex items-center gap-2 text-xs text-gray-500 mb-6 fade-up">
        <a href="index.html" class="hover:text-white transition"><i class="fa-solid fa-house text-[10px]"></i></a>
        <i class="fa-solid fa-chevron-right text-[8px]"></i>
        <span class="text-gray-300" data-i18n="svc.header.title2">Services</span>
      </nav>
      <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4 fade-up">
        <div>
          <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight mb-3">
            <span data-i18n="svc.header.title1">Catalogue des</span>
            <span class="text-brand" data-i18n="svc.header.title2">Services</span>
          </h1>
          <p class="text-gray-400 text-sm md:text-base max-w-lg" data-i18n="svc.header.desc">Choisissez votre service et commandez en quelques clics.</p>
        </div>
        <div class="flex items-center gap-3">
          <!-- Mobile filter toggle -->
          <button id="mobile-filter-btn"
                  class="lg:hidden flex items-center gap-2 bg-surface-card border border-surface-border hover:border-brand/40 text-sm text-gray-300 hover:text-white px-4 py-2.5 rounded-xl transition">
            <i class="fa-solid fa-sliders text-brand text-xs"></i>
            <span data-i18n="svc.filter.btn">Filtres</span>
          </button>
          <select id="sort-select"
                  class="bg-surface-card border border-surface-border text-sm text-gray-300 rounded-xl px-4 py-2.5 focus:outline-none focus:border-brand/50 transition cursor-pointer">
            <option value="default" data-i18n-opt="svc.sort.default">Trier par dÃ©faut</option>
            <option value="price-asc" data-i18n-opt="svc.sort.asc">Prix croissant</option>
            <option value="price-desc" data-i18n-opt="svc.sort.desc">Prix dÃ©croissant</option>
          </select>
        </div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ MOBILE FILTER OVERLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="filter-overlay" class="filter-overlay fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm opacity-0 invisible lg:hidden">
    <div class="filter-panel-mobile absolute bottom-0 left-0 right-0 bg-surface-card border-t border-surface-border rounded-t-3xl p-6 max-h-[80vh] overflow-y-auto transform translate-y-full">
      <div class="flex items-center justify-between mb-6">
        <h3 class="font-bold text-lg" data-i18n="svc.filter.btn">Filtres</h3>
        <button id="close-filter-btn" class="text-gray-400 hover:text-white transition text-xl">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <!-- Mobile filters content (cloned by JS) -->
      <div id="mobile-filter-content" class="space-y-6"></div>
    </div>
  </div>

  <!-- â”€â”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="pb-20 px-6">
    <div class="max-w-7xl mx-auto">
      <div class="flex flex-col lg:flex-row gap-8">

        <!-- â”€â”€ SIDEBAR FILTERS (Desktop) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <aside class="hidden lg:block w-64 shrink-0">
          <div class="bg-surface-card border border-surface-border rounded-2xl p-6 sticky top-24 space-y-7">

            <!-- Search -->
            <div>
              <label class="text-[11px] text-gray-500 uppercase tracking-widest font-semibold mb-2 block" data-i18n="svc.filter.search.label">Recherche</label>
              <div class="relative">
                <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm"></i>
                <input id="search-input" type="text"
                       data-i18n-ph="svc.filter.search.ph"
                       placeholder="Montage vidÃ©oâ€¦"
                       class="w-full bg-surface border border-surface-border rounded-xl pl-9 pr-3 py-2.5 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-brand/50 transition" />
              </div>
            </div>

            <!-- Category -->
            <div>
              <label class="text-[11px] text-gray-500 uppercase tracking-widest font-semibold mb-3 block" data-i18n="svc.filter.cat.label">CatÃ©gorie</label>
              <div class="flex flex-col gap-2" id="category-filters">
                <button data-cat="" class="filter-chip active text-left text-sm border border-surface-border rounded-xl px-3 py-2.5">
                  <i class="fa-solid fa-grip mr-2 text-xs"></i><span data-i18n="svc.filter.all">Tout</span>
                </button>
              </div>
            </div>

            <!-- Price Range -->
            <div>
              <label class="text-[11px] text-gray-500 uppercase tracking-widest font-semibold mb-3 block" data-i18n="svc.filter.price.label">Prix max</label>
              <input id="price-range" type="range" min="0" max="10000" step="100" value="10000"
                     class="price-track w-full" />
              <div class="flex justify-between text-xs text-gray-500 mt-2">
                <span>0 MAD</span>
                <span id="price-label" class="text-brand font-semibold">10 000 MAD</span>
              </div>
            </div>

            <!-- Reset -->
            <button id="reset-filters"
                    class="w-full text-sm text-gray-400 hover:text-white border border-surface-border hover:border-brand/40 rounded-xl py-2.5 transition group">
              <i class="fa-solid fa-rotate-left mr-1.5 group-hover:rotate-[-360deg] transition-transform duration-500"></i><span data-i18n="svc.filter.reset">RÃ©initialiser</span>
            </button>
          </div>
        </aside>

        <!-- â”€â”€ SERVICE GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div class="flex-1 min-w-0">
          <div class="flex items-center justify-between mb-6">
            <p id="result-count" class="text-sm text-gray-400"></p>
          </div>

          <div id="services-grid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
            <div class="sm:col-span-2 xl:col-span-3 text-center py-20 text-gray-500">
              <div class="inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-surface-card border border-surface-border mb-4">
                <i class="fa-solid fa-spinner fa-spin text-xl text-brand"></i>
              </div>
              <p class="text-sm" data-i18n="svc.loading">Chargementâ€¦</p>
            </div>
          </div>
        </div>
      </div>

      <!-- â”€â”€ COMING SOON SECTION (outside flex row) â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div id="coming-soon-section" class="hidden mt-16">
        <div class="flex items-center gap-4 mb-8">
          <span class="bg-yellow-500/10 border border-yellow-500/30 text-yellow-400 text-xs font-bold px-4 py-1.5 rounded-full uppercase tracking-wider">
            <i class="fa-solid fa-clock mr-1.5"></i><span data-i18n="coming.badge">BientÃ´t disponible</span>
          </span>
          <div class="flex-1 h-px bg-surface-border"></div>
        </div>
        <div id="coming-soon-catalog" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>
  </div>

  <!-- â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <footer class="border-t border-white/[0.06] bg-surface-card/50">
    <div class="max-w-7xl mx-auto px-6 py-12">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex items-center gap-6">
          <a href="index.html" dir="ltr" class="site-logo text-xl font-bold tracking-tight">
            <span class="text-brand">Pixel</span><span>One</span>
          </a>
          <div class="h-5 w-px bg-white/[0.06] hidden md:block"></div>
          <p class="text-gray-500 text-sm" data-i18n="svc.footer">Agence CrÃ©ative Maroc</p>
        </div>
        <div class="flex flex-wrap justify-center items-center gap-4 text-sm text-gray-500">
          <a href="privacy.html" class="hover:text-white transition" data-i18n="footer.privacy">ConfidentialitÃ©</a>
          <span class="text-white/10">Â·</span>
          <a href="terms.html" class="hover:text-white transition" data-i18n="footer.terms">Conditions</a>
          <span class="text-white/10">Â·</span>
          <a href="refund-policy.html" class="hover:text-white transition" data-i18n="footer.refund">Remboursement</a>
          <span class="text-white/10">Â·</span>
          <span>Â© 2026</span>
        </div>
      </div>
    </div>
  </footer>

</div>

<!-- â”€â”€ Scripts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="assets/js/config.js"></script>
<script src="assets/js/i18n.js"></script>
<script src="assets/js/supabase-client.js"></script>
<script>
  let activeCategory = '';
  let maxPrice = 10000;
  let searchQuery = '';
  let sortMode = 'default';
  let allServices = CONFIG.SERVICES;
  let comingSoonServices = CONFIG.COMING_SOON_SERVICES || [];

  function translateSortOptions() {
    document.querySelectorAll('#sort-select option[data-i18n-opt]').forEach(opt => {
      opt.textContent = t(opt.dataset.i18nOpt);
    });
  }

  function buildCategoryChips() {
    const catContainer = document.getElementById('category-filters');
    catContainer.querySelectorAll('[data-cat]:not([data-cat=""])').forEach(el => el.remove());

    CONFIG.CATEGORIES.forEach(cat => {
      const btn = document.createElement('button');
      btn.dataset.cat = cat.value;
      btn.className = 'filter-chip text-left text-sm border border-surface-border rounded-xl px-3 py-2.5';
      const icons = { video: 'fa-film', design: 'fa-pen-nib', web: 'fa-code' };
      btn.innerHTML = `<i class="fa-solid ${icons[cat.value] || 'fa-tag'} mr-2 text-xs"></i>${t('cat.' + cat.value)}`;
      catContainer.appendChild(btn);
    });
  }

  function getFiltered() {
    const lang = getLang();
    let list = [...allServices];
    if (activeCategory) list = list.filter(s => s.category === activeCategory);
    if (searchQuery) {
      list = list.filter(s => {
        const title = (s.titles && s.titles[lang]) || s.title;
        return title.toLowerCase().includes(searchQuery.toLowerCase());
      });
    }
    list = list.filter(s => s.price <= maxPrice);
    if (sortMode === 'price-asc')  list.sort((a, b) => a.price - b.price);
    if (sortMode === 'price-desc') list.sort((a, b) => b.price - a.price);
    return list;
  }

  function renderGrid() {
    const lang = getLang();
    const grid = document.getElementById('services-grid');
    const filtered = getFiltered();
    document.getElementById('result-count').textContent = `${filtered.length} ${t('svc.results')}`;

    if (!filtered.length) {
      grid.innerHTML = `
        <div class="sm:col-span-2 xl:col-span-3 text-center py-20 text-gray-500">
          <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-surface-card border border-surface-border mb-4">
            <i class="fa-solid fa-face-meh text-2xl"></i>
          </div>
          <p class="text-sm">${t('svc.empty')}</p>
        </div>`;
      return;
    }

    const catIcons = { video: 'fa-film', design: 'fa-pen-nib', web: 'fa-code' };

    grid.innerHTML = filtered.map(s => {
      const title    = (s.titles && s.titles[lang]) || s.title;
      const features = (s.features_i18n && s.features_i18n[lang]) || s.features;
      const delivery = s.delivery_time || '';
      return `
      <a href="service-details.html?id=${encodeURIComponent(s.id)}"
         class="svc-card group bg-surface-card border border-surface-border rounded-2xl overflow-hidden hover:border-brand/30 block">
        <div class="relative overflow-hidden h-48">
          <img src="${s.image_url}" alt="${title}"
               class="svc-img w-full h-full object-cover" loading="lazy" />
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
          <span class="absolute top-3 start-3 bg-black/60 backdrop-blur-md text-[11px] text-gray-200 px-3 py-1 rounded-full border border-white/10">
            <i class="fa-solid ${catIcons[s.category] || 'fa-tag'} mr-1 text-brand text-[10px]"></i>
            ${t('cat.' + s.category)}
          </span>
          ${delivery ? `
          <span class="absolute top-3 end-3 bg-brand/90 backdrop-blur-sm text-[10px] text-white font-bold px-2.5 py-1 rounded-full">
            <i class="fa-solid fa-bolt mr-1 text-[9px]"></i>${delivery}
          </span>` : ''}
        </div>
        <div class="p-5">
          <h3 class="font-bold text-[15px] mb-3 group-hover:text-brand transition">${title}</h3>
          <ul class="text-gray-400 text-xs space-y-1.5 mb-4">
            ${features.slice(0, 4).map(f => `<li class="flex items-start gap-2"><i class="fa-solid fa-check text-brand text-[10px] mt-0.5 shrink-0"></i><span>${f}</span></li>`).join('')}
          </ul>
          <div class="flex items-center justify-between mt-auto pt-4 border-t border-surface-border">
            <p class="text-brand font-extrabold text-lg">${s.price.toLocaleString('fr-FR')} <span class="text-xs font-normal text-gray-500">MAD</span></p>
            <span class="bg-brand/10 group-hover:bg-brand text-brand group-hover:text-white text-xs font-semibold px-3.5 py-1.5 rounded-lg border border-brand/20 group-hover:border-brand transition-all duration-300">
              ${t('svc.card.order')}
            </span>
          </div>
        </div>
      </a>
    `}).join('');

    // Animate cards in
    if (typeof gsap !== 'undefined') {
      gsap.from('#services-grid .svc-card', {
        y: 30, opacity: 0, duration: 0.5, stagger: 0.08, ease: 'power2.out', clearProps: 'all'
      });
    }
  }

  // â”€â”€ Mobile filter logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function openMobileFilters() {
    const overlay = document.getElementById('filter-overlay');
    const content = document.getElementById('mobile-filter-content');
    // Clone desktop sidebar content
    const aside = document.querySelector('aside .space-y-7');
    if (aside && !content.children.length) {
      const clone = aside.cloneNode(true);
      // Update IDs to avoid duplicates
      clone.querySelectorAll('[id]').forEach(el => { el.id = 'mob-' + el.id; });
      content.appendChild(clone);
      // Sync mobile filter events
      const mobSearch = content.querySelector('[id="mob-search-input"]');
      if (mobSearch) mobSearch.addEventListener('input', e => {
        searchQuery = e.target.value.trim();
        document.getElementById('search-input').value = searchQuery;
        renderGrid();
      });
      const mobRange = content.querySelector('[id="mob-price-range"]');
      if (mobRange) mobRange.addEventListener('input', e => {
        maxPrice = Number(e.target.value);
        const label = content.querySelector('[id="mob-price-label"]');
        if (label) label.textContent = maxPrice.toLocaleString('fr-FR') + ' MAD';
        document.getElementById('price-range').value = maxPrice;
        document.getElementById('price-label').textContent = maxPrice.toLocaleString('fr-FR') + ' MAD';
        renderGrid();
      });
      content.addEventListener('click', e => {
        const chip = e.target.closest('.filter-chip');
        if (!chip) return;
        document.querySelectorAll('.filter-chip').forEach(b => b.classList.remove('active'));
        chip.classList.add('active');
        // Also activate desktop chip
        const desktopChip = document.querySelector(`aside .filter-chip[data-cat="${chip.dataset.cat}"]`);
        if (desktopChip) {
          document.querySelectorAll('aside .filter-chip').forEach(b => b.classList.remove('active'));
          desktopChip.classList.add('active');
        }
        activeCategory = chip.dataset.cat;
        renderGrid();
      });
    }
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeMobileFilters() {
    const overlay = document.getElementById('filter-overlay');
    overlay.classList.remove('active');
    document.body.style.overflow = '';
  }

  // Re-render everything when language changes
  document.addEventListener('langchange', () => {
    buildCategoryChips();
    translateSortOptions();
    renderGrid();
    renderComingSoonCatalog();
  });

  // Event listeners
  document.addEventListener('click', e => {
    const chip = e.target.closest('aside .filter-chip');
    if (!chip) return;
    document.querySelectorAll('aside .filter-chip').forEach(b => b.classList.remove('active'));
    chip.classList.add('active');
    activeCategory = chip.dataset.cat;
    renderGrid();
  });

  document.getElementById('search-input').addEventListener('input', e => {
    searchQuery = e.target.value.trim();
    renderGrid();
  });

  document.getElementById('price-range').addEventListener('input', e => {
    maxPrice = Number(e.target.value);
    document.getElementById('price-label').textContent = maxPrice.toLocaleString('fr-FR') + ' MAD';
    renderGrid();
  });

  document.getElementById('sort-select').addEventListener('change', e => {
    sortMode = e.target.value;
    renderGrid();
  });

  document.getElementById('reset-filters').addEventListener('click', () => {
    activeCategory = ''; maxPrice = 10000; searchQuery = ''; sortMode = 'default';
    document.getElementById('search-input').value = '';
    document.getElementById('price-range').value = 10000;
    document.getElementById('price-label').textContent = '10 000 MAD';
    document.getElementById('sort-select').value = 'default';
    document.querySelectorAll('.filter-chip').forEach(b => b.classList.remove('active'));
    document.querySelector('.filter-chip[data-cat=""]').classList.add('active');
    renderGrid();
  });

  // Mobile filter buttons
  document.getElementById('mobile-filter-btn').addEventListener('click', openMobileFilters);
  document.getElementById('close-filter-btn').addEventListener('click', closeMobileFilters);
  document.getElementById('filter-overlay').addEventListener('click', e => {
    if (e.target === e.currentTarget) closeMobileFilters();
  });

  function parseSvcJson(s) {
    let features = s.features;
    if (!Array.isArray(features)) { try { features = JSON.parse(features || '[]'); } catch (_) { features = []; } }
    let features_i18n = s.features_i18n;
    if (typeof features_i18n === 'string') { try { features_i18n = JSON.parse(features_i18n); } catch (_) { features_i18n = {}; } }
    let titles = s.titles;
    if (typeof titles === 'string') { try { titles = JSON.parse(titles); } catch (_) { titles = {}; } }
    let descriptions = s.descriptions;
    if (typeof descriptions === 'string') { try { descriptions = JSON.parse(descriptions); } catch (_) { descriptions = {}; } }
    return { ...s, features, features_i18n: features_i18n || {}, titles: titles || {}, descriptions: descriptions || {} };
  }

  // Load services from Supabase
  async function loadServices() {
    try {
      const sb = getSupabaseClient();
      const { data, error } = await sb.from('services').select('*').eq('is_active', true).eq('is_coming_soon', false).order('sort_order', { ascending: true });
      if (!error && data && data.length) {
        allServices = data.map(parseSvcJson);
      }
      const { data: csData, error: csErr } = await sb.from('services').select('*').eq('is_coming_soon', true).order('sort_order', { ascending: true });
      if (!csErr && csData && csData.length) {
        comingSoonServices = csData.map(parseSvcJson);
      }
    } catch (_) { /* Supabase unavailable â€” use CONFIG fallback */ }
  }

  // Render coming soon
  function renderComingSoonCatalog() {
    const section = document.getElementById('coming-soon-section');
    const grid = document.getElementById('coming-soon-catalog');
    if (!section || !grid) return;

    if (!comingSoonServices.length) {
      section.classList.add('hidden');
      return;
    }

    section.classList.remove('hidden');
    const lang = getLang();

    grid.innerHTML = comingSoonServices.map(s => {
      const title = (s.titles && s.titles[lang]) || s.title;
      const desc = (s.descriptions && s.descriptions[lang]) || '';
      const features = (s.features_i18n && s.features_i18n[lang]) || s.features || [];
      return `
      <div class="relative bg-surface-card border border-yellow-500/20 rounded-2xl overflow-hidden opacity-60 hover:opacity-100 transition-all duration-300">
        <div class="absolute inset-0 bg-gradient-to-b from-yellow-500/5 to-transparent pointer-events-none"></div>
        <div class="relative overflow-hidden h-36">
          <img src="${s.image_url}" alt="${title}" class="w-full h-full object-cover grayscale" loading="lazy" />
          <div class="absolute inset-0 bg-black/50"></div>
          <span class="absolute top-3 start-3 bg-yellow-500/20 border border-yellow-500/40 text-yellow-400 text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider">
            <i class="fa-solid fa-clock mr-1"></i>${t('coming.badge') || 'BientÃ´t'}
          </span>
        </div>
        <div class="p-5">
          <h3 class="font-bold text-base mb-1">${title}</h3>
          ${desc ? `<p class="text-gray-500 text-xs mb-3 line-clamp-2">${desc}</p>` : ''}
          <ul class="text-gray-500 text-xs space-y-1 mb-4">
            ${features.slice(0, 3).map(f => `<li class="flex items-center gap-2"><i class="fa-solid fa-circle text-[4px] text-yellow-500/60"></i>${f}</li>`).join('')}
          </ul>
          <div class="flex items-center justify-between pt-3 border-t border-surface-border">
            <p class="text-gray-500 text-sm"><span data-i18n="coming.from">${t('coming.from')}</span> <span class="text-white font-bold">${Number(s.price).toLocaleString('fr-FR')} MAD</span></p>
            <span class="text-yellow-500/60 text-xs font-semibold"><i class="fa-solid fa-hourglass-half mr-1"></i>${t('coming.soon')}</span>
          </div>
        </div>
      </div>
    `}).join('');
  }

  // â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.addEventListener('DOMContentLoaded', async () => {
    await loadServices();
    buildCategoryChips();
    translateSortOptions();
    renderGrid();
    renderComingSoonCatalog();

    // GSAP hero animation
    if (typeof gsap !== 'undefined') {
      gsap.from('.fade-up', {
        y: 30, opacity: 0, duration: 0.7, stagger: 0.15, ease: 'power2.out', clearProps: 'all'
      });
    }
  });
</script>
</body>
</html>
